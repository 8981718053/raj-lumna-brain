<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Lumna Search â€” Raj & Lumna</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg1: #0f172a;
    --bg2: #081028;
    --glass: rgba(255,255,255,0.06);
    --accent: #ff4d8b;
    --accent2:#6ea8ff;
    --muted: rgba(255,255,255,0.65);
    --card: rgba(255,255,255,0.04);
    --radius: 16px;
  }
  *{box-sizing:border-box; font-family: 'Inter', system-ui, -apple-system, sans-serif; color: #e6f0ff;}
  html,body{height:100%; margin:0; background: radial-gradient(1200px 600px at 10% 10%, #0b1224 0%, transparent 20%), linear-gradient(160deg,var(--bg1), var(--bg2));}
  .wrap{max-width:1100px; margin:32px auto; padding:20px; display:grid; grid-template-columns: 1fr 360px; gap:20px;}
  /* mobile */
  @media (max-width:900px){
    .wrap{grid-template-columns: 1fr; padding:14px;}
    .side {order:2}
  }
  header{display:flex; align-items:center; gap:14px; margin-bottom:14px;}
  .logo{
    width:64px; height:64px; border-radius:14px; background:linear-gradient(135deg,var(--accent), #ffd1f0); display:flex; align-items:center; justify-content:center; box-shadow:0 6px 30px rgba(0,0,0,0.6);
    font-weight:800; color:#081028; font-size:20px;
  }
  h1{margin:0; font-size:20px; letter-spacing:0.2px}
  p.subtitle{margin:0; color:var(--muted); font-size:13px}

  /* main search card */
  .search-card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:var(--radius); padding:18px; box-shadow: 0 8px 40px rgba(0,0,0,0.4); border:1px solid rgba(255,255,255,0.03);}
  .controls{display:flex; gap:10px; align-items:center}
  .search-input{flex:1; display:flex; gap:8px; align-items:center}
  input[type="search"]{
    width:100%; padding:12px 14px; border-radius:12px; border:none; outline:none; background:var(--card); color:inherit;
    font-size:15px; box-shadow: inset 0 1px 0 rgba(255,255,255,0.02);
  }
  .pill{
    display:flex; gap:8px; padding:6px 8px; border-radius:999px; background:rgba(255,255,255,0.02); align-items:center;
    font-size:13px; color:var(--muted);
  }
  .types{margin-top:12px; display:flex; gap:8px; flex-wrap:wrap}
  .type-btn{padding:8px 12px;border-radius:999px;border:1px solid rgba(255,255,255,0.03); background:transparent; cursor:pointer; font-size:13px; color:var(--muted)}
  .type-btn.active{background:linear-gradient(90deg,var(--accent),var(--accent2)); color:#081028; border:none; font-weight:600; box-shadow:0 8px 30px rgba(110,168,255,0.08)}

  /* results */
  .results{margin-top:16px; display:grid; gap:10px}
  .result{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:12px; border-radius:12px; border:1px solid rgba(255,255,255,0.02)}
  .r-title{font-weight:700; color:#f8fbff}
  .r-url{font-size:12px; color: #9fb4ff; margin-top:6px}
  .r-snippet{color:var(--muted); margin-top:8px; font-size:14px}

  /* side analyzer (chat-like) */
  .side{height:calc(100vh - 120px); position:sticky; top:20px; align-self:start}
  .analyzer{background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:14px; padding:12px; height:100%; display:flex; flex-direction:column; gap:8px; border:1px solid rgba(255,255,255,0.02)}
  .analyzer .header{display:flex; align-items:center; gap:8px}
  .goddess{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,#ffd1f0,#ffb3db); display:flex; align-items:center; justify-content:center; color:#081028; font-weight:700}
  .chat{flex:1; overflow:auto; padding-right:6px}
  .bubble{max-width:85%; padding:8px 10px; border-radius:12px; margin:6px 0; font-size:14px}
  .bubble.ai{background:rgba(110,168,255,0.1); color: #eaf2ff; align-self:flex-start}
  .bubble.user{background:rgba(255,77,139,0.08); color:#ffdcea; align-self:flex-end}
  .typing{font-style:italic; opacity:0.8}

  /* footer/search actions */
  .actions{display:flex; gap:8px; margin-top:10px; align-items:center}
  .btn{
    padding:10px 14px; border-radius:12px; background:transparent; border:1px solid rgba(255,255,255,0.04); cursor:pointer; color:var(--muted); font-weight:600;
  }
  .btn.primary{background: linear-gradient(90deg,var(--accent),var(--accent2)); color:#081028; border:none; box-shadow: 0 10px 40px rgba(110,168,255,0.06)}

  footer.note{margin-top:12px; color:var(--muted); font-size:12px}
</style>
</head>
<body>
  <div class="wrap">
    <div>
      <header>
        <div class="logo">L</div>
        <div>
          <h1>Lumna Search</h1>
          <p class="subtitle">Futuristic smart search â€” pattern-learning brain â€¢ math-powered reasoning</p>
        </div>
      </header>

      <div class="search-card" id="mainCard">
        <div class="controls">
          <div class="search-input" style="flex:1">
            <input id="q" type="search" placeholder="Search the web, code, image, video, audio, medicine..." />
          </div>
          <div>
            <button class="btn primary" id="searchBtn">Search</button>
          </div>
        </div>

        <div class="types" id="types">
          <button class="type-btn active" data-type="web">Web</button>
          <button class="type-btn" data-type="image">Image</button>
          <button class="type-btn" data-type="video">Video</button>
          <button class="type-btn" data-type="audio">Audio</button>
          <button class="type-btn" data-type="code">Code</button>
          <button class="type-btn" data-type="medicine">Medicine</button>
        </div>

        <div class="results" id="results" aria-live="polite">
          <!-- results appear here -->
          <div style="color:var(--muted); padding:12px; border-radius:10px; margin-top:8px; background:rgba(255,255,255,0.01)">Try: "quantum error correction", or "optimize gradient descent example", or "image of Saturn rings"</div>
        </div>

        <div class="actions">
          <div class="pill">ðŸ§  Brain: <span id="brainState">idle</span></div>
          <button class="btn" id="clearBtn">Clear</button>
          <div style="flex:1"></div>
          <button class="btn" id="advBtn">Advanced</button>
        </div>

        <footer class="note">Powered by Lumna Brain â€¢ Use Cloudflare Worker/Proxy for live web results. Medicine searches show citations only. Not medical advice.</footer>
      </div>

    </div>

    <!-- side analyzer -->
    <aside class="side">
      <div class="analyzer">
        <div class="header">
          <div class="goddess">L</div>
          <div>
            <div style="font-weight:700">Lumna Analyzer</div>
            <div style="font-size:12px;color:var(--muted)">Pattern brain â€¢ math engine</div>
          </div>
        </div>
        <div class="chat" id="chat">
          <div class="bubble ai">Hello â€” I'm Lumna. Ask a query to analyze & rank results.</div>
        </div>
        <div style="display:flex; gap:8px;">
          <input id="mini" placeholder="Quick note..." style="flex:1; padding:8px; border-radius:10px; border:none; background:rgba(255,255,255,0.02); color:inherit"/>
          <button class="btn" id="noteBtn">Save</button>
        </div>
      </div>
    </aside>
  </div>

<script>
/* --- Basic interactivity (placeholders). Later: integrate Pyodide & proxy. --- */

const types = document.querySelectorAll('.type-btn');
let currentType = 'web';
types.forEach(t=> t.addEventListener('click', (e)=>{
  types.forEach(x=>x.classList.remove('active'));
  t.classList.add('active');
  currentType = t.dataset.type;
  document.getElementById('brainState').innerText = 'mode:'+currentType;
}));

document.getElementById('searchBtn').addEventListener('click', doSearch);
document.getElementById('q').addEventListener('keydown', (e)=>{ if(e.key==='Enter') doSearch(); });
document.getElementById('clearBtn').addEventListener('click', ()=>{ document.getElementById('results').innerHTML=''; });

function addResult(title, url, snippet){
  const r = document.createElement('div'); r.className='result';
  r.innerHTML = `<div class="r-title">${title}</div><div class="r-url">${url}</div><div class="r-snippet">${snippet}</div>`;
  document.getElementById('results').appendChild(r);
}

function addChat(text, who='ai'){
  const c = document.createElement('div'); c.className='bubble '+who; c.innerText=text;
  document.getElementById('chat').appendChild(c);
  document.getElementById('chat').scrollTop = document.getElementById('chat').scrollHeight;
}

/* Fake search flow:
 - show typing
 - fake results (placeholder)
 - push analysis to Lumna analyzer
 Later: replace fetchFakeResults with proxy+brain integration.
*/
async function doSearch(){
  const q = document.getElementById('q').value.trim();
  if(!q) return;
  document.getElementById('results').innerHTML='';
  document.getElementById('brainState').innerText = 'thinking';
  addChat('â€¦thinking on: "'+q+'"','ai');
  // show typing illusion
  await new Promise(r=>setTimeout(r, 700));

  // fake results based on type
  const t = currentType;
  // simple seeded fake results:
  if(t==='web'){
    addResult(`About ${q}`, `https://example.com/search?q=${encodeURIComponent(q)}`, `A summary of ${q} using math reasoning & curated sources.`);
    addResult(`${q} â€” Deep Dive`, `https://docs.example.com/${encodeURIComponent(q)}`, `In-depth explanation and formulas.`);
  } else if(t==='image'){
    addResult(`Image results for ${q}`, `https://images.example.com/${encodeURIComponent(q)}`, `Top images & alt-text.`);
  } else if(t==='code'){
    addResult(`Code examples for ${q}`, `https://code.example.com/${encodeURIComponent(q)}`, `Runnable snippets, tests, and optimization hints.`);
  } else if(t==='medicine'){
    addResult(`Medical overview: ${q}`, `https://pubmed.example/${encodeURIComponent(q)}`, `Citation summary only. Not medical advice.`);
  } else {
    addResult(`${t} results for ${q}`, `https://example.com/${encodeURIComponent(q)}`, `Results of type ${t}.`);
  }

  // push analysis to side analyzer
  addChat('Analyzed query: "'+q+'" â€” pattern weight updated.','ai');

  document.getElementById('brainState').innerText = 'idle';
}

/* quick note save (localStorage) */
document.getElementById('noteBtn').addEventListener('click', ()=>{
  const v = document.getElementById('mini').value.trim();
  if(!v) return;
  const notes = JSON.parse(localStorage.getItem('rl_notes'||'[]')) || [];
  notes.push({t:Date.now(), text:v});
  localStorage.setItem('rl_notes', JSON.stringify(notes));
  addChat('Saved note: '+v,'user');
  document.getElementById('mini').value='';
});

/* Accessibility: simple focus */
document.getElementById('q').focus();
</script>
</body>
</html>
